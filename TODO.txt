Add support for masking WebSocket frames

Revisit ws_frame and conn code for cleanup

Clean up conn.c, especially surrounding the verification of server handshake 
response

Start working on nonblocking code for sockets

